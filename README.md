# Тема 10. Декораторы и исключения
Отчет по Теме #10 выполнил:
- Рожков Сергей Сергеевич
- ЗПИЭ-20-2

| Задание | Сам_раб |
| ------  | ------ |
| Задание 1 | + |
| Задание 2 | + |
| Задание 3 | + |
| Задание 4 | + |
| Задание 5 | + |

знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
- к.э.н., доцент Панов М.А.

## Самостоятельная работа №1
### Вовочка решил заняться спортивным программированием на python, но для этого он должен знать за какое время выполняется его программа. Он решил, что для этого ему идеально подойдет декоратор для функции, который будет выяснять за какое время выполняется та или иная функция. Помогите Вовочке в его начинаниях и напишите такой декоратор. Результатом вашей работы будет листинг кода и скриншот консоли, в котором будет выполненная функция Фибоначчи и время выполнения программы.

```python
import time


def def_timer_decorator(func):
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        execution_time = end_time - start_time
        print(f"Функция выполняется за {execution_time} секунд")
        return result

    return wrapper


@def_timer_decorator
def fibonacci():
    fib1 = fib2 = 1
    for i in range(2, 200):
        fib1, fib2 = fib2, fib1 + fib2
        print(fib2, end=" ")


if __name__ == "__main__":
    fibonacci()
```

### Результат
![Консоль]()

## Выводы
Выполняя задание я научился создавать и использовать декоратор, подходящий к любой функции
  
## Самостоятельная работа №2
### Посмотрев на Вовочку, вы также загорелись идеей спортивного программирования, начав тренировки вы узнали, что для решения некоторых задач необходимо считывать данные из файлов. Но через некоторое время вы столкнулись с проблемой что файлы бывают пустыми, и вы не получаете вводные данные для решения задачи. После этого вы решили не просто считывать данные из файла, а всю конструкцию оборачивать в исключения, чтобы избежать такой проблемы. Создайте пустой файл и файл, в котором есть какая-то информация. Напишите код программы. Если файл пустой, то, нужно вызвать исключение (“бросить исключение”) и вывести в консоль “файл пустой”, а если он не пустой, то вывести информацию из файла.

```python
for file in ["empty.txt", "spending.txt"]:
    try:
        with open(file, "r") as f:
            content = f.read()
        if not content.strip():
            raise Exception("Файл пустой")
        print(content)
    except Exception as warning:
        print(warning, "\n")
```

### Результат
![Консоль]()

## Выводы
Выполняя задание я научился вызывать исключения и выводить сообщение об этой ошибке, также использовать метод strip для корректности проверки является ли файл пустым, но с оставшимися пробелами
  
## Самостоятельная работа №3
### Напишите функцию, которая будет складывать 2 и введенное пользователем число, но если пользователь введет строку или другой неподходящий тип данных, то в консоль выведется ошибка “Неподходящий тип данных. Ожидалось число.”. Реализовать функционал программы необходимо через try/except и подобрать правильный тип исключения. Создавать собственное исключение нельзя. Проведите несколько тестов, в которых исключение вызывается и нет. Результатом выполнения задачи будет листинг кода и получившийся вывод в консоль.

```python
def summing():
    try:
        x = int(input()) + 2
        print(x)
    except ValueError:
        print(Exception("Неподходящий тип данных. Ожидалось число."))


if __name__ == "__main__":
    summing()
```

### Результат
![Консоль]()

## Выводы
Выполняя задание я научился вызывать исключения для проверки информации, поступающей с клавиатуры, и если необходимо, то возвращать сообщение об ошибке

## Самостоятельная работа №4
### Создайте собственный декоратор, который будет использоваться для двух любых вами придуманных функций. Декораторы, которые использовались ранее в работе нельзя воссоздавать. Результатом выполнения задачи будет: класс декоратора, две как-то связанными с ним функциями, скриншот консоли с выполненной программой и подробные комментарии, которые будут описывать работу вашего кода.

```python
# Ввод пользователем навзания птицы
bird_name = input("Введите название птицы, например 'пеганка':\n")

# Объявление словарей с семействами птиц и описанием птиц
bird_family = {
    "Утиные": ["Савка", "Пеганка"],
    "Дятловые": ["Большой пестрый дятел", "Зеленый дятел"],
    "Данные отсутствуют": [],
}

bird_description = {
    "Савка": "голубой клюв, окраска тела состоит из сочетания темно-рыжего, бурого, коричневого и охристого цветов",
    "Пеганка": "ярко-красный клюв, черная с зеленым металлическим отливом голова",
    "Данные отсутствуют": [],
}

# Объявление декоратора для вывода информации о птицах
def bird_info_decorator(func):
	# Объявление функции-оболочки, которая вызывает исходную функцию
    def wrapper():
        print("Информация о птице:")
				# Вызов исходной функции с переданным аргументом именем птицы
        func(bird_name.lower().capitalize())

		# Возвращает функцию-оболочку
    return wrapper

# Объявление функции для получения семейства птицы
@bird_info_decorator
def get_bird_family(name):
		# Если название птицы есть в словаре, то выводится семейство и происходит возврат из функции, если нет, то выводится "Данные отсутствуют"
    for family, birds in bird_family.items():
        if name in birds:
            print("Птица относится к семейству", family)
            return
    print("Данные отсутствуют")

# Объявление функции для получения описания птицы
@bird_info_decorator
def get_bird_description(name):
		# Если название птицы есть в словаре, то выводится описание и происходит возврат из функции, если нет, то выводится "Описание недоступно"
    for birds, description in bird_description.items():
        if name in birds:
            print("Имеет", description)
            return
        else:
            print("Описание недоступно")

# Вызов функций для получения семейства птиц и описания птицы
get_bird_family()
get_bird_description()
```

### Результат
![Консоль]()

## Выводы
Выполняя задание я научился создавать декораторы и использовать их в коде с функциями, передавать другие функции в качестве аргумента

## Самостоятельная работа №5
### Создайте собственное исключение, которое будет использоваться в двух любых фрагментах кода. Исключения, которые использовались ранее в работе нельзя воссоздавать. Результатом выполнения задачи будет: класс исключения, код к котором в двух местах используется это исключение, скриншот консоли с выполненной программой и подробные комментарии, которые будут описывать работу вашего кода.
### 

```python
# Ввод пользователем навзания птицы
bird_name = input("Введите название птицы, например 'пеганка':\n")

# Объявление словарей с семействами птиц и описанием птиц
bird_family = {
    "Утиные": ["Савка", "Пеганка"],
    "Дятловые": ["Большой пестрый дятел", "Зеленый дятел"],
    "Данные отсутствуют": [],
}

bird_description = {
    "Савка": "голубой клюв, окраска тела состоит из сочетания темно-рыжего, бурого, коричневого и охристого цветов",
    "Пеганка": "ярко-красный клюв, черная с зеленым металлическим отливом голова",
    "Данные отсутствуют": [],
}

# Объявление декоратора для вывода информации о птицах, которая также перехватывает исключения KeyError
def bird_info_decorator(func):
	# Объявление функции-оболочки, которая вызывает исходную функцию
    def wrapper():
        try:
            print("Информация о птице:")
            func(bird_name.lower().capitalize())
        except KeyError:
            print("Название птицы отсутствует в базе")
    return wrapper

# Объявление функции для получения семейства птицы
@bird_info_decorator
def get_bird_family(name):
		# Если название птицы есть в словаре, то выводится семейство и происходит возврат из функции, если нет, то выводится "Данные отсутствуют"
    for family, birds in bird_family.items():
        if name in birds:
            print("Птица относится к семейству", family)
            return
		# Вызывает исключение KeyError если названия птицы нет в словаре
    raise KeyError("Название птицы отсутствует в базе")

# Объявление функции для получения описания птицы
@bird_info_decorator
def get_bird_description(name):
		# Если название птицы есть в словаре, то выводится описание и происходит возврат из функции, если нет, то выводится "Описание недоступно"
    for birds, description in bird_description.items():
        if name in birds:
            print("Имеет", description)
            return
		# Вызывает исключение KeyError если названия птицы нет в словаре
    raise KeyError("Название птицы отсутствует в базе")

# Вызов функций для получения семейства птиц и описания птицы
get_bird_family()
get_bird_description()
```

### Результат
![Консоль]()

## Выводы
Выполняя задание я научился создавать исключения и применять их в коде, также использовать try/catch для их обработки и вывода сообщения

## Общие выводы по теме
Выполняя работы по данной теме я узнал как использовать декораторы и исключения в коде, как их создавать самому, как декораторы могут заменить повторное использование кода и как использование исключений может улучшить код и его вывод
